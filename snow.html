<html>
<head>
    <title>
        This my snow crash :)
    </title>

    <style>
        html, body {
            margin 0 auto;
            width: 100%;
            height: 100%;
            background-color: #3e3e3e;
        }
        .main {
            margin: 50px auto;
            text-align: center;
        }
        .snow {
            border: 2px solid black;
        }
    </style>
</head>

<body>
    <div class="main">
        <h3>Snow Crash</h3>
        <canvas id="Snow" class="snow"></canvas>
    </div>



    <script>

        (function(){

            function drawSnow(ctx, px, imageData, colorFactor){
                /*
                    ctx - a 2d context object
                    px - integer value denoting the number of pixels in the canvas.
                    imageData - ctx.imageData object into which pixels are modified.
                    colorfactor - an integer 0 <= colorFactor < 1 that denotes the degree to which RGB values can vary.  0.5 recommended for color snow crash simulation.
                */
                var n,
                    mx,
                    multiplier = colorFactor || 0,
                    maxSaturation = Math.floor(255 / (1 + multiplier));
                    snow = Math.floor(Math.random() * maxSaturation);

                for (i = 0; i < px; i ++ ) {
                    n = i * 4; // starting location.  each pixel has 4 slots in the imageData array.  RGBa

                    // R
                    mx = (multiplier) ? Math.random() + multiplier : 1;
                    imageData.data[n] = snow * mx;

                    // G
                    mx = (multiplier) ? Math.random() + multiplier : 1;
                    imageData.data[n+1] = snow * mx;

                    // B
                    mx = (multiplier) ? Math.random() + multiplier : 1;
                    imageData.data[n+2] = snow * mx;

                    // alpha
                    imageData.data[n+3] = 255;

                    snow = Math.floor(Math.random() * maxSaturation);
                }

                ctx.putImageData(imageData, 0, 0);
            }


            var i,
                x = 800,
                y = 500,
                px = x * y,
                canvas = document.getElementById("Snow"),
                ctx = canvas.getContext("2d"),
                imageData = ctx.createImageData(x, y);

            canvas.style.width = x;
            canvas.style.height = y;

            setInterval(function(){
                drawSnow(ctx, px, imageData, 0.5);
            }, 65);


        })();

    </script>
</body>

</html>
